/** @type {import('next').NextConfig} */

// üîß SOLU√á√ÉO DEFINITIVA EINVAL: For√ßa desabilita√ß√£o de symlinks
// Isso √© cr√≠tico para projetos no Windows/OneDrive
process.env.NODE_OPTIONS = (process.env.NODE_OPTIONS || '') + ' --no-preserve-symlinks --preserve-symlinks-main=false';

const nextConfig = {
  webpack: (config, { isServer }) => {
    if (!isServer) {
      config.resolve.fallback = {
        async_hooks: false,
        fs: false,
        crypto: false,
        stream: false,
      };
    }
    // üîß CORRE√á√ÉO EINVAL: Desabilita symlinks completamente no Windows/OneDrive
    config.resolve.symlinks = false;
    
    // For√ßa webpack a n√£o seguir symlinks
    config.resolve.plugins = config.resolve.plugins || [];
    
    return config;
  },
  eslint: {
    ignoreDuringBuilds: true,
  },
  typescript: {
    ignoreBuildErrors: true,
  },
  // üîß SOLU√á√ÉO EINVAL: Usa sistema de arquivos real, n√£o symlinks
  // serverComponentsExternalPackages foi movido para serverExternalPackages no Next.js 15
  serverExternalPackages: [],
};

export default nextConfig;
